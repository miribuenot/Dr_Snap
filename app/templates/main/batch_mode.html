{% load i18n %}
<!DOCTYPE html>
<html class="nivo-lightbox-notouch" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Dr. Snap - Batch Mode</title>
    
    <link rel="stylesheet" href="/static/app/content/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="icon" href="/static/app/images/favicon.ico">
    <link rel="stylesheet" href="/static/app/icons/icons.css">
    <link type="text/css" rel="stylesheet" href="/static/app/content/css_002.css">
    <link type="text/css" rel="stylesheet" href="/static/app/content/css.css">
    <link rel="stylesheet" href="/static/app/content/bootstrap-main.css">
    <link rel="stylesheet" href="/static/app/content/animate.css">
    <link rel="stylesheet" href="/static/app/content/owl_002.css">
    <link rel="stylesheet" href="/static/app/content/owl.css">
    <link rel="stylesheet" href="/static/app/content/nivo-lightbox.css">
    <link rel="stylesheet" href="/static/app/content/default.css">
    <link rel="stylesheet" href="/static/app/content/styles.css">
    <link rel="stylesheet" href="/static/app/content/responsive.css">
    <link rel="stylesheet" href="/static/app/content/red.css">
    
    <style>
        body { 
            padding-top: 140px; 
            background-color: #f9f9f9; 
        }
        
        .language-content { cursor: pointer; }

        /* --- CONTENEDOR PRINCIPAL (Estilo tarjeta blanca limpia) --- */
        .main-card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            margin-bottom: 50px;
        }

        /* --- BOTONES DE SELECCIÓN (Estilo Dr. Snap) --- */
        .mode-selector {
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.6; /* Apagado por defecto */
            transform: scale(0.98);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .mode-selector:hover {
            opacity: 0.8;
            transform: scale(0.99);
        }

        /* ESTADO SELECCIONADO */
        .mode-selector.selected {
            opacity: 1;
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 2px solid #E74C3C; /* Borde rojo al seleccionar */
        }

        /* CABECERAS DE MODO */
        .mode-header {
            padding: 15px;
            text-align: center;
            color: white;
            font-weight: bold;
            font-size: 1.4em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Colores específicos imitando la captura */
        .header-vanilla {
            background-color: #E6B0AA; /* Rosa palo / Rojo claro */
        }
        
        .header-extended {
            background-color: #E74C3C; /* Rojo Dr. Snap */
        }

        /* CAJA DE HABILIDADES (El estilo "Dotted" de la captura) */
        .skills-box {
            background-color: white;
            border: 4px dotted #E0B4E8; /* Borde punteado morado/rosa */
            border-radius: 15px;
            padding: 20px;
            margin-top: -10px; /* Para que solape un poco o quede pegado */
            position: relative;
            z-index: 2;
        }

        /* TABLAS DE PUNTOS */
        .skills-table {
            width: 100%;
            font-size: 0.9em;
        }
        .skills-table td {
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
            color: #666;
        }
        .skills-table td.points {
            text-align: right;
            font-weight: bold;
            color: #E74C3C;
        }
        .skills-table tr:last-child td { border-bottom: none; }

        .total-score {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            background: #eee;
            border-radius: 20px;
            padding: 5px;
        }

        /* --- ZONA DE SUBIDA --- */
        .upload-wrapper {
            margin-top: 40px;
            border-top: 1px solid #eee;
            padding-top: 30px;
        }

        .custom-file-input {
            border: 2px dashed #E74C3C;
            border-radius: 10px;
            padding: 20px;
            background: #fff5f5;
            width: 100%;
            text-align: center;
            cursor: pointer;
            margin-bottom: 20px;
        }

        /* Ocultar radios */
        input[type="radio"] { display: none; }
        
        h2.main-title {
            color: #E74C3C;
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 10px;
        }
    </style>

    <script src="/static/app/scripts/jquery.min.js"></script>
    <script>
        function selectMode(mode) {
            $('.mode-selector').removeClass('selected');
            $('#selector-' + mode).addClass('selected');
            $('#radio-' + mode).prop('checked', true);
        }

        $(document).ready(function(){
            // Inicializar Extended como seleccionado por defecto
            selectMode('extended');

            // Mostrar nombre de archivo
            $('input[type="file"]').change(function(e){
                var fileName = e.target.files[0].name;
                $('#filename-placeholder').html('<strong>' + fileName + '</strong>');
                $('#filename-placeholder').css('color', '#E74C3C');
            });
        });
    </script>
</head>

<body>
    <div class="navbar navbar-inverse bs-docs-nav navbar-fixed-top sticky-navigation" role="navigation">
        <div class="container">
            <div class="navbar-collapse collapse" height="200px" id="stamp-navigation">
                <a class="text-center" href="/">
                    <img class="d-block img-fluid" height="100px" src="/static/app/images/final.jpg" alt="Dr. Snap">
                </a>
                
                <ul class="nav navbar-nav navbar-right login-register small-text">
                    <li style="display: block;" class="login dropdown">
                        <a aria-expanded="false" type="button" data-toggle="dropdown" class="dropdown-toggle language-content" data-hover="dropdown" style="padding-top: 80%;">
                            <span class="icon-basic-world"></span>
                        </a>
                        <ul role="menu" class="dropdown-menu" style="padding: 20px;">
                            <li style="padding-left: 20px;">
                                <div>
                                    <form action="/i18n/setlang/" method="post">
                                        {% csrf_token %}
                                        <input name="next" type="hidden" value="{{ request.path }}" />
                                        <select name="language" onchange="this.form.submit()" class='btn-group btn-group-justified colored-text language-content'>
                                            {% get_language_info_list for LANGUAGES as languages %}
                                            {% for language in languages %}
                                                <option value="{{ language.code }}" {% if language.code == request.LANGUAGE_CODE %}selected{% endif %}>{{ language.name }} ({{ language.code }})</option>
                                            {% endfor %}
                                        </select>
                                    </form>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">
        
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                
                <div class="main-card text-center">
                    
                    <h2 class="main-title">Batch Analysis</h2>
                    <p class="text-muted" style="font-size: 1.1em; margin-bottom: 40px;">
                        {% trans "Choose your mode and upload your files." %}
                    </p>

                    <form action="/batch_analyze/" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <div class="row">
                            
                            <div class="col-md-6">
                                <div class="mode-selector" id="selector-vanilla" onclick="selectMode('vanilla')">
                                    <div class="mode-header header-vanilla">
                                        Vanilla Mode
                                    </div>
                                    <div class="skills-box">
                                        <div class="total-score">{% trans "Max Score:" %} 21</div>
                                        <table class="skills-table">
                                            <tr><td>Logic</td><td class="points">3</td></tr>
                                            <tr><td>Parallelism</td><td class="points">3</td></tr>
                                            <tr><td>Data Rep.</td><td class="points">3</td></tr>
                                            <tr><td>Flow Control</td><td class="points">3</td></tr>
                                            <tr><td>User Interactivity</td><td class="points">3</td></tr>
                                            <tr><td>Synchronization</td><td class="points">3</td></tr>
                                            <tr><td>Abstraction</td><td class="points">3</td></tr>
                                        </table>
                                    </div>
                                    <input type="radio" id="radio-vanilla" name="analysis_mode" value="vanilla">
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="mode-selector" id="selector-extended" onclick="selectMode('extended')">
                                    <div class="mode-header header-extended">
                                        Extended Mode
                                    </div>
                                    <div class="skills-box">
                                        <div class="total-score">{% trans "Max Score:" %} 27</div>
                                        <table class="skills-table">
                                            <tr><td><strong>{% trans "All Vanilla Skills" %}</strong></td><td class="points">21</td></tr>
                                            <tr><td colspan="2" style="border:none; height:10px;"></td></tr>
                                            <tr style="background-color: #fff0f0;"><td><i class="glyphicon glyphicon-plus-sign"></i> Math Operators</td><td class="points">3</td></tr>
                                            <tr style="background-color: #fff0f0;"><td><i class="glyphicon glyphicon-plus-sign"></i> Motion Operators</td><td class="points">3</td></tr>
                                        </table>
                                        <p style="margin-top: 15px; font-size: 0.85em; color: #E74C3C;">
                                            <em>{% trans "*Includes Dr. Snap extensions" %}</em>
                                        </p>
                                    </div>
                                    <input type="radio" id="radio-extended" name="analysis_mode" value="extended">
                                </div>
                            </div>

                        </div>

                        <div class="upload-wrapper">
                            <h4 class="dark-text"><strong>{% trans "Upload Projects" %}</strong></h4>
                            
                            <div class="custom-file-input" onclick="$('#file-input-real').click();">
                                <span class="glyphicon glyphicon-cloud-upload" style="font-size: 2em; color: #E74C3C;"></span>
                                <br>
                                <span id="filename-placeholder">
                                    {% trans "Click to select .ZIP (.xml) or .TXT (URLs)" %}
                                </span>
                            </div>
                            
                            <input type="file" id="file-input-real" name="batchFile" accept=".txt,.zip" required style="display:none;">
                            
                            <button type="submit" class="btn btn-primary standard-button btn-lg" style="padding: 15px 50px; font-size: 1.2em;">
                                {% trans "ANALYZE NOW" %}
                            </button>
                        </div>

                    </form>
                </div>

            </div>
        </div>
    </div>

    <footer class="footer grey-bg" style="margin-top: 50px;">
        {% trans "©2026 Dr. Snap" %}
    </footer>

    <script src="/static/app/scripts/bootstrap.min.js"></script>
    <script src="/static/app/scripts/jquery.nav.js"></script>
</body>
</html>